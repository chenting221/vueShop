webpackJsonp([4],{"+jng":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("Dd8w"),i=n.n(a),o=n("NYxO"),s={name:"List",data:function(){return{tableData:[],loading:!1,searchInfo:"",pageInfos:{pagesizes:[10,25,50,100],pagesize:10,pageindex:1,total:0}}},computed:i()({tableHeight:function(){return window.innerHeight-304}},Object(o.b)({stateApi:function(e){return e.api}})),methods:{init:function(){var e=this;e.loading=!0,e.$axios({method:"get",url:e.stateApi.sys.goods.goods.list,params:{query:e.searchInfo,pagenum:e.pageInfos.pageindex,pagesize:e.pageInfos.pagesize}}).then(function(t){var n=t.data;e.loading=!1,200===n.meta.status?(e.tableData=n.data.goods,e.pageInfos.total=n.data.total):e.$message.error(n.meta.msg)}).catch(function(){e.loading=!1})},onReset:function(e){this.searchInfo="",this.pageInfos.pageindex=1,this.init()},onSearch:function(e){this.pageInfos.pageindex=1,this.init()},handleCurrentChange:function(e){this.pageInfos.pageindex=e,this.init()},handleSizeChange:function(e){this.pageInfos.pageindex=1,this.pageInfos.pagesize=e,this.init()},addGoods:function(){this.$router.push("/goods/add")},del:function(e){var t=this;t.$confirm("此操作将永久删除该商品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$axios({method:"delete",url:t.stateApi.sys.goods.goods.list+"/"+e.goods_id}).then(function(e){t.loading=!1;var n=e.data;200===n.meta.status?t.init():t.$message.error(n.meta.msg)}).catch(function(){t.loading=!1})}).catch(function(){})},onRefresList:function(){this.loading=!0,this.init()}},created:function(){this.init()},activated:function(){this.init()}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"min-height":"calc(100vh - 100px)"},attrs:{"element-loading-background":"rgba(0, 0, 0, 0)"}},[n("div",{staticClass:"main",staticStyle:{"margin-bottom":"20px"}},[n("form",{staticClass:"screen"},[n("div",{staticClass:"screen-item"},[n("label",[e._v("请输入搜索内容:")]),e._v(" "),n("el-input",{model:{value:e.searchInfo,callback:function(t){e.searchInfo=t},expression:"searchInfo"}})],1),e._v(" "),n("div",{staticClass:"screen-item"}),e._v(" "),n("div",{staticClass:"screen-btns"},[n("el-button",{on:{click:e.onReset}},[e._v("清空")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.onSearch}},[e._v("查询")])],1)])]),e._v(" "),n("div",{staticClass:"main",staticStyle:{"margin-bottom":"20px"}},[n("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary"},on:{click:e.addGoods}},[e._v("添加商品")]),e._v(" "),n("el-table",{attrs:{stripe:"",border:"","max-height":e.tableHeight,data:e.tableData}},[n("el-table-column",{attrs:{align:"center","header-align":"center",prop:"goods_name",label:"商品名称",fixed:""}}),e._v(" "),n("el-table-column",{attrs:{align:"center","header-align":"center",prop:"goods_price",label:"商品价格",width:"120"}}),e._v(" "),n("el-table-column",{attrs:{align:"center","header-align":"center",prop:"goods_weight",label:"商品重量",width:"120"}}),e._v(" "),n("el-table-column",{attrs:{align:"center","header-align":"center",prop:"add_time",label:"创建时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("dateFormat")(t.row.add_time))+"\n        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center","header-align":"center",fixed:"right",label:"操作",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"}},[e._v("编辑")]),e._v(" "),n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(n){return e.del(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),n("el-footer",[n("el-pagination",{attrs:{"current-page":e.pageInfos.pageindex,"page-sizes":e.pageInfos.pagesizes,layout:"total, sizes, prev, pager, next, jumper",total:e.pageInfos.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])},staticRenderFns:[]};var l=n("VU/8")(s,r,!1,function(e){n("qNOx")},"data-v-76e1b147",null);t.default=l.exports},qNOx:function(e,t){}});
//# sourceMappingURL=4.f7fe5d10f70783bb5ea8.js.map