webpackJsonp([17],{"2mjN":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Dd8w"),o=a.n(n),i=a("NYxO"),l={name:"AddCate",props:{visible:{required:!0,type:Boolean},data:{type:Object}},data:function(){return{formLabelWidth:"180px",formInfo:{catename:""},cat_pid:"",cat_level:"",parentCateList:[],loading:!1,rules:{catename:[{required:!0,message:"请输入分类名称",trigger:["change","blur"]}]},cascaderProps:{value:"cat_id",label:"cat_name",children:"children"}}},computed:o()({},Object(i.b)({stateApi:function(e){return e.api}})),created:function(){this.init()},methods:{init:function(){var e=this;e.loading=!0,e.$axios({method:"get",url:e.stateApi.sys.goods.cate.list,params:{type:2}}).then(function(t){var a=t.data;e.loading=!1,200===a.meta.status?e.parentCateList=a.data:e.$message.error(a.meta.msg)}).catch(function(){e.loading=!1})},closeDialog:function(){this.$emit("closeDL")},handleCancle:function(e){this.closeDialog(),this.$refs[e].resetFields()},handleSubmit:function(e){var t=this;t.$refs[e].validate(function(e){if(!e)return!1;t.loading||(t.loading=!0,t.$axios({method:"post",url:t.stateApi.sys.goods.cate.list,data:{cat_pid:t.cat_pid,cat_name:t.formInfo.catename,cat_level:t.cat_level}}).then(function(e){t.loading=!1;var a=e.data;201===a.meta.status?(t.$message.success(a.meta.msg),t.closeDialog(),t.$emit("refreshList")):t.$message.error(a.meta.msg)}).catch(function(){t.loading=!1}))})},handleChange:function(e){e.length>0?(this.cat_pid=e[e.length-1],this.cat_level=e.length):(this.cat_pid=0,this.cat_level=0)}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"添加分类",visible:e.visible,width:"38%","before-close":e.closeDialog,"close-on-click-modal":!1},on:{close:e.closeDialog}},[a("el-form",{ref:"formInfo",attrs:{model:e.formInfo,rules:e.rules}},[a("el-form-item",{attrs:{label:"分类名称","label-width":e.formLabelWidth,prop:"catename"}},[a("el-input",{staticClass:"select",model:{value:e.formInfo.catename,callback:function(t){e.$set(e.formInfo,"catename",t)},expression:"formInfo.catename"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"父级分类","label-width":e.formLabelWidth}},[a("el-cascader",{attrs:{options:e.parentCateList,"expand-trigger":"hover",props:e.cascaderProps,clearable:""},on:{change:e.handleChange}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.handleCancle("formInfo")}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:e.loading},on:{click:function(t){return e.handleSubmit("formInfo")}}},[e._v("确定")])],1)],1)},staticRenderFns:[]};var r=a("VU/8")(l,s,!1,function(e){a("oBU4")},"data-v-8a9be420",null);t.default=r.exports},oBU4:function(e,t){}});
//# sourceMappingURL=17.03cdb40f49a24e837ca8.js.map