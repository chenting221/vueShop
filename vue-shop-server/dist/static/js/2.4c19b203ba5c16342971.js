webpackJsonp([2],{hd2p:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("mvHQ"),n=i.n(a),o=i("Dd8w"),s=i.n(o),l=i("NYxO"),r={name:"Cate",data:function(){return{tableData:[],loading:!1,columns:[{label:"分类名称",prop:"cat_name",headerAlign:"center",align:"center"},{label:"是否有效",type:"template",template:"isOk",headerAlign:"center",align:"center"},{label:"排序",type:"template",template:"isLevel",headerAlign:"center",align:"center"},{label:"操作",type:"template",template:"command",headerAlign:"center",align:"center"}],pageInfos:{pagesizes:[10,25,50,100],pagesize:10,pageindex:1,total:0},dialogFormVisible:!1,dialogFormVisible2:!1,editInfos:{}}},components:{"add-cate":function(){return i.e(17).then(i.bind(null,"2mjN"))},"edit-cate":function(){return i.e(24).then(i.bind(null,"Jb1g"))}},computed:s()({tableHeight:function(){return window.innerHeight-304}},Object(l.b)({stateApi:function(e){return e.api}})),methods:{init:function(){var e=this;e.loading=!0,e.$axios({method:"get",url:e.stateApi.sys.goods.cate.list,params:{pagenum:e.pageInfos.pageindex,pagesize:e.pageInfos.pagesize}}).then(function(t){var i=t.data;e.loading=!1,200===i.meta.status?(e.tableData=i.data.result,e.pageInfos.total=i.data.total):e.$message.error(i.meta.msg)}).catch(function(){e.loading=!1})},handleCurrentChange:function(e){this.pageInfos.pageindex=e,this.init()},handleSizeChange:function(e){this.pageInfos.pageindex=1,this.pageInfos.pagesize=e,this.init()},changeStatus:function(e){var t=this;t.$axios({method:"put",url:"https://www.liulongbin.top:8888/api/private/v1/users/"+e.id+"/state/"+e.mg_state}).then(function(i){t.loading=!1;var a=i.data;200===a.meta.status?t.$message.success(a.meta.msg):(e.mg_state=!e.mg_state,t.$message.error(a.meta.msg))}).catch(function(){t.loading=!1})},addCategories:function(){this.dialogFormVisible=!0},edit:function(e){this.dialogFormVisible2=!0,this.editInfos=JSON.parse(n()(e))},del:function(e){var t=this;t.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$axios({method:"delete",url:t.stateApi.sys.goods.cate.list+"/"+e.cat_id}).then(function(e){t.loading=!1;var i=e.data;200===i.meta.status?t.init():t.$message.error(i.meta.msg)}).catch(function(){t.loading=!1})}).catch(function(){})},onRefresList:function(){this.loading=!0,this.init()},handleCloseDialog:function(){this.dialogFormVisible=!1},handleCloseDialog2:function(){this.dialogFormVisible2=!1}},created:function(){this.init()},activated:function(){this.init()}},c={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"min-height":"calc(100vh - 100px)"},attrs:{"element-loading-background":"rgba(0, 0, 0, 0)"}},[i("div",{staticClass:"main",staticStyle:{"margin-bottom":"20px"}},[i("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary"},on:{click:e.addCategories}},[e._v("添加分类")]),e._v(" "),i("tree-table",{attrs:{data:e.tableData,columns:e.columns,"selection-type":!1,"expand-type":!1,border:"","show-row-hover":!1},scopedSlots:e._u([{key:"isOk",fn:function(e){return[!1===e.row.cat_deleted?i("i",{staticClass:"el-icon-success",staticStyle:{color:"lightgreen"}}):i("i",{staticClass:"el-icon-error",staticStyle:{color:"red"}})]}},{key:"isLevel",fn:function(t){return[0===t.row.cat_level?i("el-tag",{attrs:{size:"mini"}},[e._v("一级")]):1===t.row.cat_level?i("el-tag",{attrs:{size:"mini",type:"success"}},[e._v("二级")]):i("el-tag",{attrs:{size:"mini",type:"warning"}},[e._v("三级")])]}},{key:"command",fn:function(t){return[i("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(i){return e.edit(t.row)}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(i){return e.del(t.row)}}},[e._v("删除")])]}}])}),e._v(" "),i("el-footer",[i("el-pagination",{attrs:{"current-page":e.pageInfos.pageindex,"page-sizes":e.pageInfos.pagesizes,layout:"total, sizes, prev, pager, next, jumper",total:e.pageInfos.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),e.dialogFormVisible?i("add-cate",{attrs:{visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},closeDL:e.handleCloseDialog,refreshList:e.onRefresList}}):e._e(),e._v(" "),e.dialogFormVisible2?i("edit-cate",{attrs:{visible:e.dialogFormVisible2,data:e.editInfos},on:{"update:visible":function(t){e.dialogFormVisible2=t},closeDL:e.handleCloseDialog2,refreshList:e.onRefresList}}):e._e()],1)])},staticRenderFns:[]};var d=i("VU/8")(r,c,!1,function(e){i("vNJP")},"data-v-e3788e70",null);t.default=d.exports},vNJP:function(e,t){}});
//# sourceMappingURL=2.4c19b203ba5c16342971.js.map