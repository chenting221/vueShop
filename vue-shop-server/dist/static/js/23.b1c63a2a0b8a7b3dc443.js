webpackJsonp([23],{"8G0c":function(e,t){},Issx:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={name:"AssignRoles",props:{visible:{required:!0,type:Boolean},data:{type:Object}},data:function(){return{formLabelWidth:"180px",loading:!1,formInfo:{roles:""},rolesList:[],rules:{roles:[{required:!0,message:"请选择要分配的新角色",trigger:"change"}]}}},created:function(){this.init()},methods:{init:function(){var e=this;e.loading=!0,e.$axios({method:"get",url:"https://www.liulongbin.top:8888/api/private/v1/roles"}).then(function(t){var o=t.data;e.loading=!1,200===o.meta.status?e.rolesList=o.data:e.$message.error(o.meta.msg)}).catch(function(){e.loading=!1})},handleCancle:function(e){this.closeDialog(),this.$refs[e].resetFields()},closeDialog:function(){this.$emit("closeDL")},handleSubmit:function(e){var t=this;t.$refs[e].validate(function(e){if(!e)return!1;t.loading||(t.loading=!0,t.$axios({method:"put",url:"https://www.liulongbin.top:8888/api/private/v1/users/"+t.data.id+"/role",data:{rid:t.formInfo.roles}}).then(function(e){t.loading=!1;var o=e.data;200===o.meta.status?(t.$message.success(o.meta.msg),t.closeDialog(),t.$emit("refreshList")):t.$message.error(o.meta.msg)}).catch(function(){t.loading=!1}))})}}},l={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{title:"分配角色",visible:e.visible,width:"38%","before-close":e.closeDialog,"close-on-click-modal":!1},on:{close:e.closeDialog}},[o("el-form",{ref:"formInfo",attrs:{model:e.formInfo,rules:e.rules}},[o("el-form-item",{attrs:{label:"当前的用户","label-width":e.formLabelWidth}},[o("span",[e._v(e._s(e.data.username))])]),e._v(" "),o("el-form-item",{attrs:{label:"当前的角色","label-width":e.formLabelWidth}},[o("span",[e._v(e._s(e.data.role_name))])]),e._v(" "),o("el-form-item",{attrs:{label:"分配新角色","label-width":e.formLabelWidth,prop:"roles"}},[o("el-select",{staticClass:"select",attrs:{placeholder:"请选择"},model:{value:e.formInfo.roles,callback:function(t){e.$set(e.formInfo,"roles",t)},expression:"formInfo.roles"}},e._l(e.rolesList,function(e){return o("el-option",{key:e.id,attrs:{label:e.roleName,value:e.id}})}),1)],1)],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){return e.handleCancle("formInfo")}}},[e._v("取消")]),e._v(" "),o("el-button",{attrs:{type:"primary",disabled:e.loading},on:{click:function(t){return e.handleSubmit("formInfo")}}},[e._v("确定")])],1)],1)},staticRenderFns:[]};var s=o("VU/8")(a,l,!1,function(e){o("8G0c")},"data-v-15f0cb32",null);t.default=s.exports}});
//# sourceMappingURL=23.b1c63a2a0b8a7b3dc443.js.map