{"version":3,"sources":["webpack:///src/components/goods/Params.vue","webpack:///./src/components/goods/Params.vue?b1ae","webpack:///./src/components/goods/Params.vue"],"names":["Params","name","data","tableData","loading","parentCateList","parentCate","activeName","activeList","staticList","dialogFormVisible","dialogFormVisible2","editInfos","isTrue","titleName","inputVisible","inputValue","cascaderProps","value","label","children","components","add-params","__webpack_require__","e","then","bind","edit-params","computed","extends_default","tableHeight","window","innerHeight","Object","vuex_esm","stateApi","state","api","methods","init","_self","this","$axios","method","url","sys","goods","cate","list","response","meta","status","$message","error","msg","catch","AddParams","edit","row","JSON","parse","stringify_default","del","$confirm","confirmButtonText","cancelButtonText","type","cat_id","attr_id","getList","handleChange","length","handleTabClick","tab","event","onRefresList","handleCloseDialog","handleCloseDialog2","val","params","sel","forEach","item","attr_vals","split","handleInputConfirm","trim","push","saveTagAttr","showInput","$nextTick","_","$refs","saveTagInput","input","focus","handleClose","index","splice","attr_name","attr_sel","join","success","created","activated","goods_Params","render","_vm","_h","$createElement","_c","directives","rawName","expression","staticStyle","min-height","attrs","element-loading-background","staticClass","margin-bottom","_v","options","expand-trigger","props","clearable","on","change","model","callback","$$v","title","show-icon","closable","tab-click","disabled","click","border","stripe","align","header-align","scopedSlots","_u","key","fn","scope","_l","close","$event","_s","ref","size","blur","nativeOn","keyup","indexOf","_k","keyCode","$set","prop","icon","visible","update:visible","closeDL","refreshList","_e","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/6.9eefe9e0489f91979677.js","sourcesContent":["<template>\n  <div\n    style=\"min-height: calc(100vh - 100px)\"\n    v-loading=\"loading\"\n    element-loading-background=\"rgba(0, 0, 0, 0)\"\n  >\n    <div\n      class=\"main\"\n      style=\"margin-bottom: 20px;\"\n    >\n      <el-row>\n        <el-col>\n          <span>选择商品分类:</span>\n          <el-cascader\n            :options=\"parentCateList\"\n            v-model=\"parentCate\"\n            expand-trigger=\"hover\"\n            :props=\"cascaderProps\"\n            @change=\"handleChange\"\n            clearable\n          ></el-cascader>\n        </el-col>\n      </el-row>\n    </div>\n    <div\n      class=\"main\"\n      style=\"margin-bottom: 20px;\"\n    >\n      <el-alert\n        title=\"注意：指允许为第三级分类设置相关参数！\"\n        type=\"warning\"\n        show-icon\n        style=\"margin-bottom: 20px;\"\n        :closable=\"false\"\n      ></el-alert>\n      <el-tabs\n        v-model=\"activeName\"\n        @tab-click=\"handleTabClick\"\n      >\n        <el-tab-pane\n          label=\"动态参数\"\n          name=\"many\"\n        >\n          <el-button\n            type=\"primary\"\n            :disabled=\"isTrue\"\n            style=\"margin-bottom: 20px;\"\n            @click=\"AddParams\"\n          >添加参数</el-button>\n          <el-table\n            :data=\"activeList\"\n            border\n            stripe\n          >\n            <el-table-column\n              type=\"expand\"\n              align=\"center\"\n              header-align=\"center\"\n            >\n              <template slot-scope=\"scope\">\n                <el-tag\n                  v-for=\"(item, index) in scope.row.attr_vals\"\n                  :key=\"index\"\n                  closable\n                  @close=\"handleClose(index, scope.row)\"\n                >{{ item }}</el-tag>\n                <el-input\n                  class=\"input-new-tag\"\n                  v-if=\"scope.row.inputVisible\"\n                  v-model=\"scope.row.inputValue\"\n                  ref=\"saveTagInput\"\n                  size=\"small\"\n                  @keyup.enter.native=\"handleInputConfirm(scope.row)\"\n                  @blur=\"handleInputConfirm(scope.row)\"\n                ></el-input>\n                <el-button\n                  v-else\n                  class=\"button-new-tag\"\n                  size=\"small\"\n                  @click=\"showInput(scope.row)\"\n                >+ New Tag</el-button>\n              </template>\n            </el-table-column>\n            <el-table-column\n              prop=\"attr_name\"\n              label=\"参数名称\"\n              align=\"center\"\n              header-align=\"center\"\n            ></el-table-column>\n            <el-table-column\n              label=\"操作\"\n              align=\"center\"\n              header-align=\"center\"\n            >\n              <template slot-scope=\"scope\">\n                <el-button\n                  @click=\"edit(scope.row)\"\n                  type=\"primary\"\n                  icon=\"el-icon-edit\"\n                  size=\"mini\"\n                >编辑</el-button>\n                <el-button\n                  @click=\"del(scope.row)\"\n                  type=\"danger\"\n                  icon=\"el-icon-delete\"\n                  size=\"mini\"\n                >删除</el-button>\n              </template>\n            </el-table-column>\n          </el-table>\n        </el-tab-pane>\n        <el-tab-pane\n          label=\"静态属性\"\n          name=\"only\"\n        >\n          <el-button\n            type=\"primary\"\n            :disabled=\"isTrue\"\n            style=\"margin-bottom: 20px;\"\n            @click=\"AddParams\"\n          >添加属性</el-button>\n          <el-table\n            :data=\"staticList\"\n            border\n            stripe\n          >\n            <el-table-column\n              type=\"expand\"\n              align=\"center\"\n              header-align=\"center\"\n            >\n              <template slot-scope=\"scope\">\n                <el-tag\n                  v-for=\"(item, index) in scope.row.attr_vals\"\n                  :key=\"index\"\n                  closable\n                  @close=\"handleClose(index, scope.row)\"\n                >{{ item }}</el-tag>\n                <el-input\n                  class=\"input-new-tag\"\n                  v-if=\"scope.row.inputVisible\"\n                  v-model=\"scope.row.inputValue\"\n                  ref=\"saveTagInput\"\n                  size=\"small\"\n                  @keyup.enter.native=\"handleInputConfirm(scope.row)\"\n                  @blur=\"handleInputConfirm(scope.row)\"\n                ></el-input>\n                <el-button\n                  v-else\n                  class=\"button-new-tag\"\n                  size=\"small\"\n                  @click=\"showInput(scope.row)\"\n                >+ New Tag</el-button>\n              </template>\n            </el-table-column>\n            <el-table-column\n              prop=\"attr_name\"\n              label=\"参数名称\"\n              align=\"center\"\n              header-align=\"center\"\n            ></el-table-column>\n            <el-table-column\n              label=\"操作\"\n              align=\"center\"\n              header-align=\"center\"\n            >\n              <template slot-scope=\"scope\">\n                <el-button\n                  @click=\"edit(scope.row)\"\n                  type=\"primary\"\n                  icon=\"el-icon-edit\"\n                  size=\"mini\"\n                >编辑</el-button>\n                <el-button\n                  @click=\"del(scope.row)\"\n                  type=\"danger\"\n                  icon=\"el-icon-delete\"\n                  size=\"mini\"\n                >删除</el-button>\n              </template>\n            </el-table-column>\n          </el-table>\n        </el-tab-pane>\n      </el-tabs>\n      <add-params\n        v-if=\"dialogFormVisible\"\n        :visible.sync=\"dialogFormVisible\"\n        @closeDL=\"handleCloseDialog\"\n        @refreshList=\"onRefresList\"\n        :title=\"titleName\"\n        :parentCate=\"parentCate\"\n      ></add-params>\n      <edit-params\n        v-if=\"dialogFormVisible2\"\n        :visible.sync=\"dialogFormVisible2\"\n        @closeDL=\"handleCloseDialog2\"\n        :data=\"editInfos\"\n        :title=\"titleName\"\n        :parentCate=\"parentCate\"\n        @refreshList=\"onRefresList\"\n      ></edit-params>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nexport default {\n  name: 'Params',\n  data () {\n    return {\n      tableData: [],\n      loading: false,\n      parentCateList: [],\n      parentCate: [],\n      activeName: 'many',\n      activeList: [],\n      staticList: [],\n      dialogFormVisible: false,\n      dialogFormVisible2: false,\n      editInfos: {},\n      isTrue: true,\n      titleName: '',\n      inputVisible: false,\n      inputValue: '',\n      cascaderProps: {\n        value: 'cat_id',\n        label: 'cat_name',\n        children: 'children'\n      }\n    }\n  },\n  components: {\n    'add-params': () => import('@/components/goods/params/AddParams.vue'),\n    'edit-params': () => import('@/components/goods/params/EditParams.vue')\n  },\n  computed: {\n    tableHeight () {\n      return window.innerHeight - 304\n    },\n    ...mapState({\n      stateApi: state => state.api\n    })\n  },\n  methods: {\n    /**\n     * 页面初始化调用\n     * @returns void\n     */\n    init () {\n      const _self = this\n      _self.loading = true\n      _self\n        .$axios({\n          method: 'get',\n          url: _self.stateApi.sys.goods.cate.list\n        })\n        .then(response => {\n          const { data } = response\n          _self.loading = false\n          if (data.meta.status === 200) {\n            _self.parentCateList = data.data\n          } else {\n            _self.$message.error(data.meta.msg)\n          }\n        })\n        .catch(() => {\n          _self.loading = false\n        })\n    },\n    /** 添加分类 */\n    AddParams () {\n      const _self = this\n      _self.dialogFormVisible = true\n    },\n    /**\n     * 编辑按钮\n     * @returns void\n     */\n    edit (row) {\n      const _self = this\n      _self.dialogFormVisible2 = true\n      _self.editInfos = JSON.parse(JSON.stringify(row))\n    },\n    /**\n     * 删除按钮\n     * @returns void\n     */\n    del (row) {\n      const _self = this\n      _self\n        .$confirm('此操作将永久删除该用户, 是否继续?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        })\n        .then(() => {\n          _self\n            .$axios({\n              method: 'delete',\n              url:\n                _self.stateApi.sys.goods.cate.list +\n                '/' +\n                row.cat_id +\n                '/attributes/' +\n                row.attr_id\n            })\n            .then(response => {\n              _self.loading = false\n              const { data } = response\n              if (data.meta.status === 200) {\n                if (_self.activeName === 'many') {\n                  _self.getList('many', _self.parentCate)\n                } else {\n                  _self.getList('only', _self.parentCate)\n                }\n              } else {\n                _self.$message.error(data.meta.msg)\n              }\n            })\n            .catch(() => {\n              _self.loading = false\n            })\n        })\n        .catch(() => {})\n    },\n    /**\n     * 父级分类\n     */\n    handleChange (value) {\n      const _self = this\n      if (value.length === 3) {\n        _self.isTrue = false\n        _self.parentCate = value[value.length - 1]\n        _self.getList('many', _self.parentCate)\n        _self.titleName = '动态参数'\n      } else {\n        _self.isTrue = true\n        _self.activeList = []\n        _self.staticList = []\n      }\n    },\n    /**\n     * tabs\n     *  */\n    handleTabClick (tab, event) {\n      const _self = this\n      _self.getList(tab.name, _self.parentCate)\n      if (tab.name === 'many') {\n        _self.titleName = '动态参数'\n      } else {\n        _self.titleName = '静态属性'\n      }\n    },\n    /**\n     * 在子页面刷新父页面数据 - 添加\n     * @returns void\n     */\n    onRefresList () {\n      const _self = this\n      _self.loading = true\n      if (_self.activeName === 'many') {\n        _self.getList('many', _self.parentCate)\n      } else {\n        _self.getList('only', _self.parentCate)\n      }\n    },\n    /**\n     * 添加按钮的关闭弹框事件\n     * @returns void\n     */\n    handleCloseDialog () {\n      const _self = this\n      _self.dialogFormVisible = false\n    },\n    /**\n     * 编辑按钮的关闭弹框事件\n     * @returns void\n     */\n    handleCloseDialog2 () {\n      const _self = this\n      _self.dialogFormVisible2 = false\n    },\n    /**\n     * 获取列表数据\n     */\n    getList (val, value) {\n      const _self = this\n      // 列表接口\n      _self\n        .$axios({\n          method: 'get',\n          url:\n            _self.stateApi.sys.goods.cate.list +\n            '/' +\n            value +\n            '/' +\n            'attributes',\n          params: {\n            sel: val\n          }\n        })\n        .then(response => {\n          const { data } = response\n          _self.loading = false\n          if (data.meta.status === 200) {\n            data.data.forEach(item => {\n              item.attr_vals = item.attr_vals ? item.attr_vals.split(' ') : []\n              // 控制文本框的显示与隐藏\n              item.inputVisible = false\n              // 文本框中输入的值\n              item.inputValue = ''\n            })\n            if (val === 'many') {\n              _self.activeList = data.data\n            } else {\n              _self.staticList = data.data\n            }\n          } else {\n            _self.$message.error(data.meta.msg)\n          }\n        })\n        .catch(() => {\n          _self.loading = false\n        })\n    },\n    /**\n     * 添加tag\n     */\n    handleInputConfirm (row) {\n      const _self = this\n      if (row.inputValue.trim().length === 0) {\n        row.inputValue = ''\n        row.inputVisible = false\n        return\n      }\n      // 如果没有return，则证明输入了内容，需要做后续处理\n      row.attr_vals.push(row.inputValue.trim())\n      row.inputValue = ''\n      row.inputVisible = false\n      _self.saveTagAttr(row)\n    },\n    showInput (row) {\n      const _self = this\n      row.inputVisible = true\n      /**\n       * $nextTick 方法的作用，就是当页面上的元素被重新渲染之后，才会指定回调函数中的代码\n       */\n      _self.$nextTick(_ => {\n        _self.$refs.saveTagInput.$refs.input.focus()\n      })\n    },\n    handleClose (index, row) {\n      const _self = this\n      row.attr_vals.splice(index, 1)\n      _self.saveTagAttr(row)\n    },\n    saveTagAttr (row) {\n      const _self = this\n      _self\n        .$axios({\n          method: 'put',\n          url:\n            _self.stateApi.sys.goods.cate.list +\n            '/' +\n            row.cat_id +\n            '/attributes/' +\n            row.attr_id,\n          data: {\n            attr_name: row.attr_name,\n            attr_sel: row.attr_sel,\n            attr_vals: row.attr_vals.join(' ')\n          }\n        })\n        .then(response => {\n          _self.loading = false\n          const { data } = response\n          if (data.meta.status === 200) {\n            _self.$message.success(data.meta.msg)\n            if (_self.activeName === 'many') {\n              _self.getList('many', _self.parentCate)\n            } else {\n              _self.getList('only', _self.parentCate)\n            }\n          } else {\n            _self.$message.error(data.meta.msg)\n          }\n        })\n        .catch(() => {\n          _self.loading = false\n        })\n    }\n  },\n  created () {\n    const _self = this\n    _self.init()\n  },\n  activated () {\n    const _self = this\n    _self.init()\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.main {\n  padding: 20px;\n  background: #ffffff;\n}\n.el-form {\n  display: flex;\n}\n.el-form-item {\n  margin-bottom: 0px;\n}\n.el-form-item.flex1 {\n  flex: 1;\n}\n.el-form-item:last-child {\n  margin-right: 0px;\n}\n.el-footer {\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n}\n.el-tag {\n  margin: 8px;\n}\n.el-tag + .el-tag {\n  margin-left: 10px;\n}\n.button-new-tag {\n  margin-left: 10px;\n  height: 32px;\n}\n.input-new-tag {\n  width: 120px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/goods/Params.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"min-height\":\"calc(100vh - 100px)\"},attrs:{\"element-loading-background\":\"rgba(0, 0, 0, 0)\"}},[_c('div',{staticClass:\"main\",staticStyle:{\"margin-bottom\":\"20px\"}},[_c('el-row',[_c('el-col',[_c('span',[_vm._v(\"选择商品分类:\")]),_vm._v(\" \"),_c('el-cascader',{attrs:{\"options\":_vm.parentCateList,\"expand-trigger\":\"hover\",\"props\":_vm.cascaderProps,\"clearable\":\"\"},on:{\"change\":_vm.handleChange},model:{value:(_vm.parentCate),callback:function ($$v) {_vm.parentCate=$$v},expression:\"parentCate\"}})],1)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"main\",staticStyle:{\"margin-bottom\":\"20px\"}},[_c('el-alert',{staticStyle:{\"margin-bottom\":\"20px\"},attrs:{\"title\":\"注意：指允许为第三级分类设置相关参数！\",\"type\":\"warning\",\"show-icon\":\"\",\"closable\":false}}),_vm._v(\" \"),_c('el-tabs',{on:{\"tab-click\":_vm.handleTabClick},model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},[_c('el-tab-pane',{attrs:{\"label\":\"动态参数\",\"name\":\"many\"}},[_c('el-button',{staticStyle:{\"margin-bottom\":\"20px\"},attrs:{\"type\":\"primary\",\"disabled\":_vm.isTrue},on:{\"click\":_vm.AddParams}},[_vm._v(\"添加参数\")]),_vm._v(\" \"),_c('el-table',{attrs:{\"data\":_vm.activeList,\"border\":\"\",\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"expand\",\"align\":\"center\",\"header-align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._l((scope.row.attr_vals),function(item,index){return _c('el-tag',{key:index,attrs:{\"closable\":\"\"},on:{\"close\":function($event){return _vm.handleClose(index, scope.row)}}},[_vm._v(_vm._s(item))])}),_vm._v(\" \"),(scope.row.inputVisible)?_c('el-input',{ref:\"saveTagInput\",staticClass:\"input-new-tag\",attrs:{\"size\":\"small\"},on:{\"blur\":function($event){return _vm.handleInputConfirm(scope.row)}},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.handleInputConfirm(scope.row)}},model:{value:(scope.row.inputValue),callback:function ($$v) {_vm.$set(scope.row, \"inputValue\", $$v)},expression:\"scope.row.inputValue\"}}):_c('el-button',{staticClass:\"button-new-tag\",attrs:{\"size\":\"small\"},on:{\"click\":function($event){return _vm.showInput(scope.row)}}},[_vm._v(\"+ New Tag\")])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"attr_name\",\"label\":\"参数名称\",\"align\":\"center\",\"header-align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"align\":\"center\",\"header-align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.edit(scope.row)}}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.del(scope.row)}}},[_vm._v(\"删除\")])]}}])})],1)],1),_vm._v(\" \"),_c('el-tab-pane',{attrs:{\"label\":\"静态属性\",\"name\":\"only\"}},[_c('el-button',{staticStyle:{\"margin-bottom\":\"20px\"},attrs:{\"type\":\"primary\",\"disabled\":_vm.isTrue},on:{\"click\":_vm.AddParams}},[_vm._v(\"添加属性\")]),_vm._v(\" \"),_c('el-table',{attrs:{\"data\":_vm.staticList,\"border\":\"\",\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"expand\",\"align\":\"center\",\"header-align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._l((scope.row.attr_vals),function(item,index){return _c('el-tag',{key:index,attrs:{\"closable\":\"\"},on:{\"close\":function($event){return _vm.handleClose(index, scope.row)}}},[_vm._v(_vm._s(item))])}),_vm._v(\" \"),(scope.row.inputVisible)?_c('el-input',{ref:\"saveTagInput\",staticClass:\"input-new-tag\",attrs:{\"size\":\"small\"},on:{\"blur\":function($event){return _vm.handleInputConfirm(scope.row)}},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.handleInputConfirm(scope.row)}},model:{value:(scope.row.inputValue),callback:function ($$v) {_vm.$set(scope.row, \"inputValue\", $$v)},expression:\"scope.row.inputValue\"}}):_c('el-button',{staticClass:\"button-new-tag\",attrs:{\"size\":\"small\"},on:{\"click\":function($event){return _vm.showInput(scope.row)}}},[_vm._v(\"+ New Tag\")])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"attr_name\",\"label\":\"参数名称\",\"align\":\"center\",\"header-align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"align\":\"center\",\"header-align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.edit(scope.row)}}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.del(scope.row)}}},[_vm._v(\"删除\")])]}}])})],1)],1)],1),_vm._v(\" \"),(_vm.dialogFormVisible)?_c('add-params',{attrs:{\"visible\":_vm.dialogFormVisible,\"title\":_vm.titleName,\"parentCate\":_vm.parentCate},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event},\"closeDL\":_vm.handleCloseDialog,\"refreshList\":_vm.onRefresList}}):_vm._e(),_vm._v(\" \"),(_vm.dialogFormVisible2)?_c('edit-params',{attrs:{\"visible\":_vm.dialogFormVisible2,\"data\":_vm.editInfos,\"title\":_vm.titleName,\"parentCate\":_vm.parentCate},on:{\"update:visible\":function($event){_vm.dialogFormVisible2=$event},\"closeDL\":_vm.handleCloseDialog2,\"refreshList\":_vm.onRefresList}}):_vm._e()],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-53a97274\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/goods/Params.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-53a97274\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Params.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Params.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Params.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-53a97274\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Params.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-53a97274\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/goods/Params.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}